# Copyright 2016 FUJITSU LIMITED

################################################################################
# Host definitions. Replace monasca_host, openstack_host, ex_node_[1-3]_host,
# ssh_user_monasca, ssh_user_openstack and ssh_user_ex_node_[1-3] with valid
# information.
################################################################################

localhost                        ansible_connection=local

# Offline Host
offline-resources-node           ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}

# Openstack Hosts
horizon-node                     ansible_ssh_host={{ openstack_host }} ansible_ssh_user={{ ssh_user_openstack }}
keystone-node                    ansible_ssh_host={{ openstack_host }} ansible_ssh_user={{ ssh_user_openstack }}

# Monasca host
cmm-node                         ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}

# ElasticSearch nodes for cluster
elastic-node-1                   ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
elastic-node-2                   ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
elastic-node-3                   ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Kafka nodes for cluster
kafka-node-1                     ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
kafka-node-2                     ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
kafka-node-3                     ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Zookeeper nodes for cluster
zookeeper-node-1                 ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
zookeeper-node-2                 ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
zookeeper-node-3                 ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Log persister nodes for cluster
log-persister-node-1             ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
log-persister-node-2             ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
log-persister-node-3             ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Log transformer nodes for cluster
log-transformer-node-1           ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
log-transformer-node-2           ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
log-transformer-node-3           ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Kibana nodes for cluster
kibana-node-1                    ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
kibana-node-2                    ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
kibana-node-3                    ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Log api nodes for cluster
log-api-node-1                   ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
log-api-node-2                   ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
log-api-node-3                   ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Memcached nodes for cluster
memcached-node-1                 ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
memcached-node-2                 ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
memcached-node-3                 ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-api nodes for cluster
monasca-api-node-1               ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-api-node-2               ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-api-node-3               ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-notification nodes for cluster
monasca-notification-node-1      ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-notification-node-2      ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-notification-node-3      ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-persister nodes
monasca-persister-node-1         ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-persister-node-2         ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-persister-node-3         ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-log-agent nodes for cluster
monasca-log-agent-node-1         ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-log-agent-node-2         ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-log-agent-node-3         ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-agent nodes for cluster
monasca-agent-node-1             ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-agent-node-2             ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-agent-node-3             ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-log-metrics nodes for cluster
monasca-log-metrics-node-1       ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
monasca-log-metrics-node-2       ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
monasca-log-metrics-node-3       ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Load balancer node
balancer-node                    ansible_ssh_host={{ balancer_host }} ansible_ssh_user={{ ssh_user_balancer }}

# Monasca Agent Hosts
cmm-monasca-agent                ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}
openstack-monasca-agent          ansible_ssh_host={{ openstack_host }} ansible_ssh_user={{ ssh_user_openstack }}

# Monasca Log Agent Hosts
cmm-monasca-log-agent            ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}
openstack-monasca-log-agent      ansible_ssh_host={{ openstack_host }} ansible_ssh_user={{ ssh_user_openstack }}

#Storm Nimbus nodes
storm-nimbus-node-1              ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
storm-nimbus-node-2              ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
storm-nimbus-node-3              ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Storm Supervisor nodes
storm-supervisor-node-1          ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
storm-supervisor-node-2          ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
storm-supervisor-node-3          ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-thresh  hosts
monasca-thresh-node              ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}

# MariaDB nodes for Galera cluster
mariadb-node-1                   ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
mariadb-node-2                   ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
mariadb-node-3                   ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# InfluxDB nodes
influxdb-node-1                  ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
influxdb-node-2                  ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
influxdb-node-3                  ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# HAProxy nodes
haproxy-node-1                   ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
haproxy-node-2                   ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
haproxy-node-3                   ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Keepalived nodes
keepalived-virtual-node          ansible_ssh_host={{ keepalived_virtual_ip }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
keepalived-node-1                ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
keepalived-node-2                ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
keepalived-node-3                ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Monasca-CLI password
monasca-cli-node                 ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}

# Elasticsearch Curator
elasticsearch-curator-node-1     ansible_ssh_host={{ ex_node_1_host }} ansible_ssh_user={{ ssh_user_ex_node_1 }}
elasticsearch-curator-node-2     ansible_ssh_host={{ ex_node_2_host }} ansible_ssh_user={{ ssh_user_ex_node_2 }}
elasticsearch-curator-node-3     ansible_ssh_host={{ ex_node_3_host }} ansible_ssh_user={{ ssh_user_ex_node_3 }}

# Grafana node
grafana-node                     ansible_ssh_host={{ monasca_host }} ansible_ssh_user={{ ssh_user_monasca }}

################################################################################
# Agent and Log-Agent group definition:
# To install additional agents (metrics and logs) add nodes to
# monasca_agent_group or monasca_log_agent_group. Run ansible-playbook
# monasca-agent.yml or ansible-playbook monasca-log-agent.yml to install agents.
################################################################################

[monasca_agent_group]
cmm-monasca-agent
openstack-monasca-agent
monasca-agent-node-1
monasca-agent-node-2
monasca-agent-node-3

[monasca_log_agent_group]
cmm-monasca-log-agent
openstack-monasca-log-agent
monasca-log-agent-node-1
monasca-log-agent-node-2
monasca-log-agent-node-3

################################################################################
# Other group definition
################################################################################

[offline_group]
offline-resources-node
localhost

[openstack_group]
horizon-node
keystone-node

[monasca_group]
cmm-node

[monasca_persister_group]
monasca-persister-node-1 influxdb_node_for_persister=keepalived-virtual-node
monasca-persister-node-2 influxdb_node_for_persister=keepalived-virtual-node
monasca-persister-node-3 influxdb_node_for_persister=keepalived-virtual-node

[monasca_api_group]
monasca-api-node-1 database_node_for_api=keepalived-virtual-node influxdb_node_for_api=keepalived-virtual-node
monasca-api-node-2 database_node_for_api=keepalived-virtual-node influxdb_node_for_api=keepalived-virtual-node
monasca-api-node-3 database_node_for_api=keepalived-virtual-node influxdb_node_for_api=keepalived-virtual-node

[monasca_notification_group]
monasca-notification-node-1 database_node_for_notification=keepalived-virtual-node
monasca-notification-node-2 database_node_for_notification=keepalived-virtual-node
monasca-notification-node-3 database_node_for_notification=keepalived-virtual-node

[memcached_group]
memcached-node-1
memcached-node-2
memcached-node-3

[kafka_group]
kafka-node-1
kafka-node-2
kafka-node-3

[zookeeper_group]
zookeeper-node-1
zookeeper-node-2
zookeeper-node-3

[monasca_log_api_group]
log-api-node-1
log-api-node-2
log-api-node-3

[monasca_log_metrics_group]
monasca-log-metrics-node-1
monasca-log-metrics-node-2
monasca-log-metrics-node-3

[monasca_log_persister_group]
log-persister-node-1
log-persister-node-2
log-persister-node-3

[monasca_log_transformer_group]
log-transformer-node-1
log-transformer-node-2
log-transformer-node-3

[elasticsearch_group]
elastic-node-1
elastic-node-2
elastic-node-3

# specify host which kibana should use to connect to elasticsearch
[kibana_group]
kibana-node-1 es_node_for_kibana=elastic-node-1
kibana-node-2 es_node_for_kibana=elastic-node-2
kibana-node-3 es_node_for_kibana=elastic-node-3

[balancer_group]
balancer-node

[openstack_uninstaller_group]
horizon-node
keystone-node

[monasca_uninstaller]
cmm-node

[storm_nimbus_group]
storm-nimbus-node-1
storm-nimbus-node-2
storm-nimbus-node-3

[storm_supervisor_group]
storm-supervisor-node-1
storm-supervisor-node-2
storm-supervisor-node-3

[monasca_thresh_group]
monasca-thresh-node database_node_for_thresh=keepalived-virtual-node

[mariadb_group]
mariadb-node-1
mariadb-node-2
mariadb-node-3

[influxdb_group]
influxdb-node-1
influxdb-node-2 influxdb_master_node_name=influxdb-node-1
influxdb-node-3 influxdb_master_node_name=influxdb-node-1

[haproxy_group]
haproxy-node-1
haproxy-node-2
haproxy-node-3

[keepalived_group]
keepalived-node-1
keepalived-node-2
keepalived-node-3

[monasca_cli_group]
monasca-cli-node

[elasticsearch_curator_group]
elasticsearch-curator-node-1
elasticsearch-curator-node-2
elasticsearch-curator-node-3

[grafana_group]
grafana-node database_node_for_grafana=keepalived-virtual-node rabbitmq_host_for_grafana={{ rabbitmq_host }}

################################################################################
# Group inheritance
################################################################################

[elkstack_group:children]
elasticsearch_group
kibana_group
monasca_log_agent_group
monasca_log_persister_group
monasca_log_transformer_group
monasca_log_metrics_group
balancer_group
elasticsearch_curator_group

[storm_group:children]
storm_nimbus_group
storm_supervisor_group

[all_group:children]
offline_group
openstack_group
monasca_group
monasca_agent_group

[openstack_group:children]
openstack_uninstaller_group

[monasca_group:children]
elkstack_group
memcached_group
kafka_group
zookeeper_group
monasca_log_api_group
balancer_group
monasca_api_group
monasca_notification_group
monasca_persister_group
storm_group
monasca_thresh_group
monasca_cli_group
database_cluster_group
grafana_group

[database_cluster_group:children]
mariadb_group
influxdb_group
haproxy_group
keepalived_group
